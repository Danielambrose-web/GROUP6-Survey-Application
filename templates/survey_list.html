<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} | GROUP6 SURVEYS</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navbar -->
    <header>
        <nav>
            <ul class="sideBar">
                <li onclick="hideSidebar()"><img src="/static/close_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.png" alt=""></li>
                <li><a href="{{ url_for('home') }}">HOME</a></li>
                <li><a href="{{ url_for('survey_selection') }}">CREATE SURVEY</a></li>
                <li><a href="{{ url_for('list_surveys') }}">All SURVEY</a></li>
            </ul>
            <div class="logo">
                <H1>GROUP SURVEY APP</H1>
            </div>
            <ul>
                <li class = "menu-btn"><a href="{{ url_for('home') }}">HOME</a></li>
                <li class = "menu-btn"><a href="{{ url_for('survey_selection') }}">CREATE SURVEY</a></li>
                <li class = "menu-btn"><a href="{{ url_for('list_surveys') }}">ALL SURVEY</a></li>
                <li class="toggle active" onclick="showSidebar()"><img src="/static/menu_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.png" alt=""></li>
            </ul>
        </nav>
    </header>
    <!-- <header class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="nav-icon"><i class="fas fa-poll"></i></span>
                GROUP6 SURVEY APP
            </div> -->
            <!-- Mobile toggle button -->
            <!-- <button class="nav-toggle" id="nav-toggle">
                &#9776; 
            </button> -->
            <!-- Nav links -->
            <!-- <nav class="nav-links" id="nav-links">
                <a href="{{ url_for('home') }}" class="nav-link">Home</a>
                <a href="{{ url_for('survey_selection') }}" class="nav-link">Create Survey</a>
                <a href="{{ url_for('list_surveys') }}" class="nav-link">All Surveys</a>
            </nav> -->
            <!-- Mobile dropdown menu -->
            <!-- <div class="mobile-dropdown" id="mobile-dropdown">
                <a href="{{ url_for('home') }}" class="dropdown-link">Home</a>
                <a href="{{ url_for('survey_selection') }}" class="dropdown-link">Create Survey</a>
                <a href="{{ url_for('list_surveys') }}" class="dropdown-link">All Surveys</a>
            </div>
        </div>
    </header> -->

    <!-- Main Content -->
    <main class="main-content">
        <section class="survey-section">
            <div class="survey-container">
                <!-- Header -->
                <div class="survey-header">
                    <h1 class="survey-page-title"><i class="fas fa-list"></i> ALL SURVEYS</h1>
                </div>

                <!-- Surveys List -->
                <div class="surveys-list">
                    {% if surveys %}
                        {% for survey in surveys %}
                        <div class="survey-card">
                            <div class="survey-card-header">
                                <h3 class="survey-title">{{ survey.title }}</h3>
                            </div>
                            {% if survey.description %}
                            <p class="survey-description">{{ survey.description }}</p>
                            {% endif %}
                            <div class="survey-actions">
                                <a href="{{ url_for('view_survey', survey_id=survey.id) }}" class="btn btn-secondary">
                                    <i class="fas fa-eye"></i> View Details
                                </a>
                                <a href="{{ url_for('take_survey', survey_id=survey.id) }}" class="btn btn-primary">
                                    <i class="fas fa-edit"></i> Take Survey
                                </a>
                                <a href="{{ url_for('survey_results', survey_id=survey.id) }}" class="btn btn-info">
                                    <i class="fas fa-chart-bar"></i> View Results
                                </a>
                                <button onclick="sharesurvey('{{ survey.id }}', '{{ survey.title }}')" class="btn btn-success"> <!--there was an error here no js file -->
                                    <i class="fas fa-share"></i> Share
                                </button>
                                <button onclick="deleteSurvey('{{ survey.id }}')" class="btn btn-danger"> <!--there was an error here no js file -->
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="empty-state">
                            <i class="fas fa-inbox empty-icon"></i>
                            <h3>No Surveys Yet</h3>
                            <p>You haven't created any surveys yet. Start by creating your first survey!</p>
                            <a href="{{ url_for('survey_selection') }}" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Create Your First Survey
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </section>
    </main>
    <!-- Scripts -->
    <script src="{{ url_for('static', filename='index.js') }}"></script>
    <script>
        function deleteSurvey(surveyId) {
            if (confirm('Are you sure you want to delete this survey? This action cannot be undone.')) {
                fetch(`/surveys/${surveyId}/delete`, {
                    method: 'POST'
                })
                .then(response => {
                    if (response.ok) {
                        location.reload();
                    } else {
                        alert('Error deleting survey');
                    }
                })
                .catch(error => {
                    alert('Error deleting survey');
                });
            }
        }

        function sharesurvey(surveyId, surveyTitle) {
            const surveyUrl = window.location.origin + '/surveys/' + surveyId + '/take';
            const shareText = 'Take this survey: ' + surveyTitle;
            
            const shareOptions = [
                'Copy Link',
                'Share on WhatsApp', 
                'Share on Facebook',
                'Share on Twitter',
                'Cancel'
            ];
            
            const choice = prompt('How would you like to share?\n1. Copy Link\n2. WhatsApp\n3. Facebook\n4. Twitter\n\nEnter number (1-4):');
            
            if (choice === '1') {
                navigator.clipboard.writeText(surveyUrl).then(() => {
                    alert('Survey link copied to clipboard!');
                });
            } else if (choice === '2') {
                window.open('https://wa.me/?text=' + encodeURIComponent(shareText + ' ' + surveyUrl));
            } else if (choice === '3') {
                window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(surveyUrl));
            } else if (choice === '4') {
                window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(shareText) + '&url=' + encodeURIComponent(surveyUrl));
            }
        }
    </script>
</body>
<!-- Footer -->
<footer class="footer">
    <div class="footer-content">
        <p>&copy; 2025 Survey System - GROUP6 SURVEY</p>
    </div>
</footer>
</html>